name: ZAP Scan and Save Report

on:
  push:
    branches:
      - main

jobs:
  zap-scan:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Code
      uses: actions/checkout@v4

    - name: Debug Files in Docker
      run: ls -la .github/workflows/

    - name: ZAP Dynamic Analysis Scan
      uses: zaproxy/action-full-scan@v0.11.0
      with:
          target: 'https://bwapp.hakhub.net/'
          #rules_file_name: '.github/workflows/rules.zap'
          cmd_options: >
            -configfile /zap/wrk/.github/workflows/bwapp.context
            -config api.addrs.addr.name=.* 
            -config api.addrs.addr.regex=true

